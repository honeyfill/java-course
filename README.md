# Итоговое задание по практическому курсу "Язык программирования Java"

## Описание

Необходимо создать приложение, позволяющее создавать отчеты по случаям 
заболевания COVID-19 в определенной стране за определенный период по дням
на основе <a href="https://github.com/CSSEGISandData/COVID-19">данных</a>,
предоставляемых Университетом Джона Хопкинса.

Приложение должно предоставлять RESTful интерфейс для запроса данных и запроса 
создания отчета. Оно должно позволять:
- запросить асинхронное создание отчета по параметрам: страна, дата "с", дата "по";
- запросить список всех ранее созданных отчетов;
- запросить список всех стран, данные по которым присутствуют в базе данных;
- скачать файл отчета (задача на "5", см. ниже).

Отчет должен представлять собой файл в формате CSV, содержащий все данные (строки) из таблицы
`covid_data`, соответствующие запрошенной стране и интервалу дат.

## Предварительные условия

- Java v11+
  - установлена системная переменная `JAVA_HOME`
  - `<Java installation dir>/bin` - добавлена в системную переменную `PATH`
- СУБД <a href="https://www.postgresql.org/">PostgreSQL 11+</a> 
  - установлена на локальной машине
  - существует роль с именем/паролем `postgres/postgres` (создастся, например, если 
    указать эти имя/пароль для супер-юзера при установке)
  - `<PostgreSQL installation dir>/bin` - добавлена в системную переменную `PATH`
- Рекомендуется использовать IDE <a href="https://www.jetbrains.com/ru-ru/idea/download/">IntelliJ IDEA (Community edition)</a>

## Выполнение задания

1. Восстановить дамп `data/covid_reporter.backup`
    ```commandline
    pg_restore -d postgres -C -U postgres data/covid_reporter.backup
    ```
   _Проверка:_ В результате должна появиться БД `covid_reporter` с двумя таблицами:
   - `covid_data` (с данными)
   - `report` (пустая)


2. Реализовать необходимую функциональность:
   
    Чтобы получить **зачет** за курс:
      - заменить все комментарии "**TODO:**" в коде приложения (каталог `src`)
        на необходимый код (см. инструкции в тексте комментариев);
   
    **Оценка "5" за экзамен** будет рекомендована для тех, кто:
     
      - в дополнение к основному функционалу реализует также всё, что указано в комментариях
      "**TODO(\*)**" (продвинутая валидация) **ИЛИ** в комментариях "**TODO(\*\*)**" (загрузка файла);
      - лично продемонстрирует свое решение мне и прокомментирует, что именно для этого сделано. 


3. Собрать приложение: 
   ```commandline
   mvnw clean package
   ```
   
4. Запустить приложение: 
   ```commandline
    mvnw spring-boot:run
   ```
   
5. Проверить, что приложение работает правильно:
    1. открыть в браузере ссылку **http://localhost:8080/index.html** - должна загрузиться страница с полями ввода
    2. протестировать основные сценарии - "правильные" и "ошибочные" - чтобы проверить, что:
        - при корректно введенных параметрах:
          - отчет создается успешно, записывается в файл, данные в файле соответствуют требованиям;
          - создается запись в таблице `report`;
          - создание отчета происходит асинхронно (в частности, пользователь не ждет окончания создания отчета);
        - при невалидном вводе показывается адекватное сообщение об ошибке (протестировать разные случаи неправильного ввода)
        - список отчетов обновляется при нажатии на кнопку "Refresh list"


## Комментарии

Все необходимые примеры можно найти в тех мини-проектах, которые мы разбирали на занятиях.

---
**Если возникают вопросы по выполнению задания, по инструкциям, по условиям и любые другие - 
сразу задавайте (лучше в Телеграм)!** 

---
**Если вдруг обнаружатся ошибки в шаблоне приложения или в инструкции,
пожалуйста, сразу сообщайте мне (в Телеграм (в группе или в личку) или по почте): буду стараться оперативно исправлять!**

---


### Полезные ссылки:
- https://spring.io/quickstart
- https://spring.io/guides
- https://docs.spring.io/spring-framework/docs/current/reference/html/
- https://www.baeldung.com/spring-tutorial
- https://www.baeldung.com/spring-boot
- https://www.baeldung.com/rest-with-spring-series
- https://commons.apache.org/proper/commons-csv/ - библиотека для CSV
- https://www.postgresql.org/ - PostgreSQL
- JPQL (язык запросов JPA):
  - https://www.objectdb.com/java/jpa/query
  - https://www.baeldung.com/spring-data-jpa-query - для примеров
